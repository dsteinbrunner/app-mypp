---
layout: default
title: App::Mypp
---

<h2>App::Mypp - Maintain Your Perl Project</h2>
<p>
    <code>dperl</code> is a result of <acronym title="jhthorsen@cpan.org">me</acronym>
    getting tired of doing the same stuff - or rather forgetting to do the same stuff for
    each of my perl projects. dperl does <i>not</i> feature the same things
    as <a href="http://search.cpan.org/dist/Dist-Zilla">Dist::Zilla</a>, but
    I would like to think of dperl VS dzil as <a href="http://search.cpan.org/dist/CPAN">cpan</a>

    vs <a href="http://search.cpan.org/dist/App-cpanminus">cpanm</a> - or at
    least that is what I'm aming for (!)
</p>

<!-- INDEX BEGIN -->
<div name="index">
<p><a name="__index__"></a></p>
<ul>

	<li><a href="#features">Features</a></li>
	<li><a href="#synopsis">Synopsis</a></li>
	<li><a href="#sample_config_file">Sample config file</a></li>
	<li><a href="#sharing_the_module">Sharing the module</a></li>
	<li><a href="#changes">Changes file</a></li>
	<li><a href="#attributes">Attributes</a></li>
	<!-- ul>

		<li><a href="#config">config</a></li>
		<li><a href="#name">name</a></li>
		<li><a href="#top_module">top_module</a></li>
		<li><a href="#top_module_name">top_module_name</a></li>
		<li><a href="#changes">changes</a></li>
		<li><a href="#dist_file">dist_file</a></li>
		<li><a href="#pause_info">pause_info</a></li>
		<li><a href="#share_extension">share_extension</a></li>
		<li><a href="#share_params">share_params</a></li>
	</ul -->

	<li><a href="#methods">Methods</a></li>
	<!-- ul>

		<li><a href="#new">new</a></li>
		<li><a href="#timestamp_to_changes">timestamp_to_changes</a></li>
		<li><a href="#update_version_info">update_version_info</a></li>
		<li><a href="#generate_readme">generate_readme</a></li>
		<li><a href="#clean">clean</a></li>
		<li><a href="#makefile">makefile</a></li>
		<li><a href="#manifest">manifest</a></li>
		<li><a href="#make__what__">make($what)</a></li>
		<li><a href="#tag_and_commit">tag_and_commit</a></li>
		<li><a href="#share_via_git">share_via_git</a></li>
		<li><a href="#share_via_extension">share_via_extension</a></li>
		<li><a href="#t_pod">t_pod</a></li>
		<li><a href="#t_load">t_load</a></li>
		<li><a href="#help">help</a></li>
	</ul -->

	<li><a href="#see_also">See also</a></li>
	<li><a href="#bugs">Bugs</a></li>
	<li><a href="#copyright___license">Copyright &amp; license</a></li>
	<li><a href="#author">Author</a></li>
</ul>
</div>
<!-- INDEX END -->

<h3 id="features">Features</h3>
<ul>
    <li>
        Generates <a href="http://search.cpan.org/dist/Module-Install">Module::Install</a> styled Makefile.PL
        (..and no - you cannot choose any other) from guesswork and black magic
    </li>
    <li>
        Will insert release date in Changes file, at the first line containing
        a proper formatted version number, and nothing more.
    </li>
    <li>Generates load tests and pod tests</li>
    <li>Generates MANIFEST and MANIFEST.SKIP</li>
    <li>Generates README from top module</li>
    <li>Update VERSION in top module</li>
    <li>Create a dist, without weird files present</li>
    <li>Upload the dist to cpan or to another custom location</li>
    <li>Commit and tag the release and pushes the changes to "origin"</li>
    <li>Build and test the project</li>
    <li>Can properly clean up <i>all</i> build files</li>
</ul>

<h2><a name="synopsis">Synopsis</a></h1>
<pre>
 Usage mypp [option]

 -update
  * Update version information in main module
  * Create/update t/00-load.t and t/99-pod*t
  * Create/update README

 -build
  * Same as -update
  * Update Changes with release date
  * Create MANIFEST* and META.yml
  * Tag and commit the changes (locally)
  * Build a distribution (.tar.gz)

 -share
  * Push commit and tag to &quot;origin&quot;
  * Upload the disted file to CPAN

 -test
  * Create/update t/00-load.t and t/99-pod*t
  * Test the project

 -clean
  * Remove files and directories which should not be included
    in the project repo

 -makefile
  * Create a Makefile.PL from plain guesswork

 -man
  * Display manual for mypp
</pre>
<h2><a name="sample_config_file">Sample config file</a></h1>
<pre>
 ---
 # Default to a converted version of top_module
 name: Foo-Bar
 
 # Default to a converted version of the project folder
 # Example: ./foo-bar/lib/Foo/Bar.pm, were &quot;foo-bar&quot; is the
 # project folder.
 top_module: lib/Foo/Bar.pm 
 
 # Default to a converted version of top_module.
 top_module_name: Foo::Bar 
 
 # Default to CPAN::Uploader. Can also be set through
 # MYPP_SHARE_MODULE environment variable.
 share_extension: AnyModuleName
 
 # Not in use if share_extension == CPAN::Uploader. Usage:
 # share_extension-&gt;upload_file($dist_file, share_params);
 share_params: [ { answer: 42 } ]</pre>
<p>All config params are optional, since <code>mypp</code> will probably figure out the
information for you.</p>
<h2><a name="sharing_the_module">Sharing the module</a></h1>
<p>By default the <a href="http://search.cpan.org/dist/CPAN-Uploader">the CPAN::Uploader manpage</a> module is used to upload the module to CPAN.
This module will use the information from <code>$HOME/.pause</code> to find login
information:</p>
<pre>
 user your_pause_username
 password your_secret_pause_password</pre>
<p>It will also use git to push changes and tag a new release:</p>
<pre>
 git commit -a -m &quot;$message_from_changes_file&quot;
 git tag &quot;$latest_version_in_changes_file&quot;
 git push origin $current_branch
 git push --tags origin</pre>
<p>The commit and tag is done when on <code>-dist</code>, while pushing the changes to
origin is done on <code>-share</code>.</p>
<h2><a name="changes">Changes file</a></h1>
<p>The expected format in <code>Changes</code> is:</p>
<pre>
 Some random header, for Example:
 Revision history for Foo-Bar

 0.02
  * Fix something
  * Add something else

 0.01 Tue Apr 20 19:34:15 CEST 2010
  * First release
  * Add some feature</pre>
<p><code>mypp</code> will automatically add the date before creating a dist.</p>
<h2><a name="attributes">Attributes</a></h1>
<h3><a name="config">config</a></h2>
<p>Holds the config from <code>mypp.yml</code> or <code>MYPP_CONFIG</code> environment variable.</p>
<h3><a name="name">name</a></h2>
<p>Holds the project name. The project name is extracted from the
<a href="#top_module">top_module</a>, unless set in config file. Example: <code>foo-bar</code>.</p>
<h3><a name="top_module">top_module</a></h2>
<p>Holds the top module location. This path is extracted from either
<code>name</code> in config file or the basename of the project. Example value:
<code>lib/Foo/Bar.pm</code>.</p>
<p>The project might look like this:</p>
<pre>
 ./foo-bar/lib/Foo/Bar.pm</pre>
<p>Where &quot;foo-bar&quot; is the basename.</p>
<h3><a name="top_module_name">top_module_name</a></h2>
<p>Returns the top module name, extracted from <a href="#top_module">top_module</a>. Example value:
<code>Foo::Bar</code>.</p>
<h3><a name="changes">changes</a></h2>
<p>Holds the latest information from <code>Changes</code>. Example:</p>
<pre>
 {
   text =&gt; qq(0.03 .... \n * Something has changed),
   version =&gt; 0.03,
 }</pre>
<h3><a name="dist_file">dist_file</a></h2>
<p>Returns the name of the target dist file.</p>
<h3><a name="pause_info">pause_info</a></h2>
<p>Holds information from <code>$HOME/.pause</code>. See <a href="http://search.cpan.org/dist/CPAN-Uploader">the CPAN::Uploader manpage</a> for details.
Example:</p>
<pre>
 {
   user =&gt; 'johndoe',
   password =&gt; 's3cret',
 }</pre>
<h3><a name="share_extension">share_extension</a></h2>
<p>Holds the classname of the module which should be used for sharing. This
value can either come from config file, <code>MYPP_SHARE_MODULE</code> environment
variable or fallback to <a href="http://search.cpan.org/dist/CPAN-Uploader">the CPAN::Uploader manpage</a>.</p>
<h3><a name="share_params">share_params</a></h2>
<p>This attribute must hold an array-ref, since it is deflated as a list when
used as arguments to <a href="#share_extension">share_extension</a>'s <code>upload_file()</code> method.</p>
<h2><a name="methods">Methods</a></h1>
<h3><a name="new">new</a></h2>
<p>Will create a new object</p>
<h3><a name="timestamp_to_changes">timestamp_to_changes</a></h2>
<p>Will insert a timestamp in Changes on the first line looking like this:</p>
<pre>
 ^\d+\.[\d_]+\s*$</pre>
<h3><a name="update_version_info">update_version_info</a></h2>
<p>Will update version in top module, with the latest version from <code>Changes</code>.</p>
<h3><a name="generate_readme">generate_readme</a></h2>
<p>Will generate a <code>README</code> file from the plain old documentation in top
module.</p>
<h3><a name="clean">clean</a></h2>
<p>Will remove all files which should not be part of your repo.</p>
<h3><a name="makefile">makefile</a></h2>
<p>Will create a Makefile.PL, unless it already exists.</p>
<h3><a name="manifest">manifest</a></h2>
<p>Will create MANIFEST and MANIFEST.SKIP.</p>
<h3><a name="make__what__">make($what)</a></h2>
<p>Will create <code>Makefile.PL</code>, unless already exists, then run perl on the
make script, and then execute <code>make $what</code>.</p>
<h3><a name="tag_and_commit">tag_and_commit</a></h2>
<p>Will commit with the text from Changes and create a tag</p>
<h3><a name="share_via_git">share_via_git</a></h2>
<p>Will use git and push changes and tags to &quot;origin&quot;. The changes will be
pushed to the currently active branch.</p>
<h3><a name="share_via_extension">share_via_extension</a></h2>
<p>Will use <a href="#share_extension">share_extension</a> module and upload the dist file.</p>
<h3><a name="t_pod">t_pod</a></h2>
<p>Will create <code>t/99-pod-coverage.t</code> and <code>t/99-pod.t</code>.</p>
<h3><a name="t_load">t_load</a></h2>
<p>Will create <code>t/00-load.t</code>.</p>
<h3><a name="help">help</a></h2>
<p>Will display <a href="#synopsis">SYNOPSIS</a> on STDOUT.</p>
<h2><a name="see_also">See also</a></h1>
<p><a href="http://search.cpan.org/dist/App-Cpanminus">the App::Cpanminus manpage</a>,
<a href="http://search.cpan.org/dist/Dist-Zilla">the Dist::Zilla manpage</a>,
<a href="http://jhthorsen.github.com/app-mypp">http://jhthorsen.github.com/app-mypp</a>.</p>
<h2><a name="bugs">Bugs</a></h1>
<p>Report bugs and issues at <a href="http://github.com/jhthorsen/app-mypp/issues">http://github.com/jhthorsen/app-mypp/issues</a>.</p>
<h2><a name="copyright___license">Copyright &amp; license</a></h1>
<p>Copyright 2007 Jan Henning Thorsen, all rights reserved.</p>
<p>This program is free software; you can redistribute it and/or modify it
under the same terms as Perl itself.</p>
<h2><a name="author">Author</a></h1>
<p><a href="http://flodhest.net/contact">Jan Henning Thorsen</a>, <code>jhthorsen at cpan.org</code></p>
